### 1.3 Writing a Spring application

The goal is to add a homepage to the Taco Cloud application. This requires a Controller to handle requests and a View Template to display HTML.

### 1.3.1 Handling web requests

Spring MVC uses controllers to handle HTTP requests. The `@Controller` annotation identifies the class, and `@GetMapping` maps the root path (`/`) to the method. The method returns the logical view name "home".

```java
package tacos;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
@Controller
public class HomeController {
 @GetMapping("/")
 public String home() {
 return "home";
 }
}
```

### 1.3.2 Defining the view

The view is created using Thymeleaf. The file is placed in `src/main/resources/templates/home.html`. Images are referenced from the static folder (`src/main/resources/static/`).

```html
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:th="http://www.thymeleaf.org">
 <head>
 <title>Taco Cloud</title>
 </head>
 <body>
 <h1>Welcome to...</h1>
 <img th:src="@{/images/TacoCloud.png}"/>
 </body>
</html>
```

### 1.3.3 Testing the controller

Spring Boot makes testing web controllers easy with `@WebMvcTest`. This allows testing the controller without starting the full server. The test uses `MockMvc` to perform a GET request and asserts that the status is OK (200), the view is "home", and the content is correct.

```java
package tacos;
import static org.hamcrest.Matchers.containsString;
import static
org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static
org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
import static
org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;
import static
org.springframework.test.web.servlet.result.MockMvcResultMatchers.view;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.test.web.servlet.MockMvc;
@RunWith(SpringRunner.class)
@WebMvcTest(HomeController.class)
public class HomeControllerTest {
 @Autowired
 private MockMvc mockMvc;
 @Test
 public void testHomePage() throws Exception {
 mockMvc.perform(get("/"))
 .andExpect(status().isOk())
 .andExpect(view().name("home"))
 .andExpect(content().string(
 containsString("Welcome to...")));
 }
}
```

### 1.3.4 Building and running the application

You can run the application via the IDE (e.g., Spring Boot Dashboard). It starts an embedded Tomcat server on port 8080. You can view the result at `http://localhost:8080`.

**Tomcat** is an embedded web server that is automatically included in your Spring Boot application. It allows your application to run and serve web requests (defaulting to port 8080) without needing to install or configure a separate external server.

### 1.3.5 Getting to know Spring Boot DevTools

DevTools improves the development workflow with features that automatically trigger when code changes:

- **Automatic application restart:** Restarts the application context when Java code changes (faster than a full restart).
    
- **Automatic browser refresh:** Refreshes the browser when resources change (requires LiveReload plugin).
    
- **Template cache disable:** Ensures template changes are seen immediately.
    
- **Built in H2 Console:** Provides access to the database at `/h2-console`.
    

### 1.3.6 Let’s review

The application works because Spring Boot's **autoconfiguration** detected the dependencies (Web and Thymeleaf) and automatically set up the Spring MVC framework, the embedded Tomcat server, and the View Resolver behind the scenes.

### 1.4 Surveying the Spring landscape

The Spring ecosystem offers various projects for different needs:

### 1.4.1 The core Spring Framework

The foundation that provides the container, Dependency Injection, Spring MVC (web), and basic JDBC support.

### 1.4.2 Spring Boot

Simplifies Spring development with starter dependencies, autoconfiguration, and the Actuator (runtime metrics).

### 1.4.3 Spring Data

Allows defining data repositories as simple Java interfaces. Supports relational (JPA), document (Mongo), and graph databases.

### 1.4.4 Spring Security

A robust framework for handling authentication, authorization, and API security.

### 1.4.5 Spring Integration and Spring Batch

- **Spring Integration:** Handles real-time integration where data is processed as it arrives.
    
- **Spring Batch:** Handles batched processing where data is collected and processed in chunks.
    

### 1.4.6 Spring Cloud

A suite of tools for building and managing microservices and cloud-native applications.